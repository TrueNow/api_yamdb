# API_YaMDb
REST API для сервиса YaMDb
YaMDb — база отзывов о фильмах, книгах, музыке и других произведениях.
Проект YaMDb собирает отзывы пользователей на произведения. Произведения делятся на категории, например: «Книги», «Фильмы», «Музыка».
Произведению могут быть присвоены несколько жанров. Новые категории и жанры может создавать только администратор.
Читатели оставляют к произведениям отзывы и оценки в диапазоне от 1 до 10.
Из множества оценок автоматически высчитывается средняя оценка произведения.

Аутентификация по JWT-токену
Поддерживает методы GET, POST, PUT, PATCH, DELETE
Предоставляет данные в формате JSON
Cоздан в команде из трёх человек с использованим Git в рамках учебного курса Яндекс.Практикум.

## Стек технологий
- Django REST Framework (DRF)
- библиотека Simple JWT
- библиотека django-filter
- база данных SQLite3
- система управления версиями git

## Как запустить проект:
1) Клонируйте репозитроий с проектом:
```
git clone https://github.com/s3r3ga/api_yamdb
```
2) В созданной директории установите виртуальное окружение, активируйте его и установите необходимые зависимости:
```
python3 -m venv venv
. venv/bin/activate
pip install -r requirements.txt
```
3) Создайте миграции:
```
python manage.py makemigrations
```
4) Выполните миграции:
```
python manage.py migrate
```
5) Cоздайте суперпользователя:
```
python manage.py createsuperuser
```
6) Загрузите тестовые данные:
```
python manage.py filldatabase
```
7) Запустите сервер:
```
python manage.py runserver
```
__________________________________
Ваш проект запустился на http://127.0.0.1:8000/
Полная документация ([redoc.yaml](https://github.com/leks20/yamdb/blob/master/static/redoc.yaml)) доступна по адресу http://127.0.0.1:8000/redoc/
С помощью команды *pytest* вы можете запустить тесты и проверить работу модулей

## Алгоритм регистрации пользователей
- Пользователь отправляет запрос с параметрами *email* и *username* на */auth/signup/*.
- YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес *email*.
- Пользователь отправляет запрос с параметрами *email* и *confirmation_code* на */auth/token/*, в ответе на запрос ему приходит token (JWT-токен).

## Ресурсы API YaMDb
- Ресурс AUTH: аутентификация.
- Ресурс USERS: пользователи.
- Ресурс TITLES: произведения, к которым пишут отзывы.
- Ресурс CATEGORIES: категории произведений («Фильмы», «Книги», «Музыка», ...).
- Ресурс GENRES: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
- Ресурс REVIEWS: отзывы на произведения. Отзыв привязан к определённому произведению.
- Ресурс COMMENTS: комментарии к отзывам. Комментарий привязан к определённому отзыву.
______________________________________________________________________
### Пример http-запроса (POST) для создания нового комментария к отзыву:
```
url = 'http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/'
data = {'text': 'Your comment'}
headers = {'Authorization': 'Bearer your_token'}
request = requests.post(url, data=data, headers=headers)
```
### Ответ API_YamDB:
```
Статус-код 200
{
 "id": 0,
 "text": "string",
 "author": "string",
 "pub_date": "2022-12-04T14:15:22Z"
}
```
